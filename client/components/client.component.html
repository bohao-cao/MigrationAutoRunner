<h2>Migration Auto Runner</h2>

<div class="col-sm-6">
	<form>
	  <div class="form-inline">
		  <div class="form-group">
		    <label for="DatabaseName">Database name</label>
		    <input type="text" class="form-control" id="databaseName" placeholder="localhost\sql12" [(ngModel)] = "dbConnection.server" ngControl="server" #name="ngForm" required>
		    <div [hidden]="name.valid|| name.pristine" class="alert alert-danger">
		    server name is required.
		    </div>
		    <button type="submit" class="btn btn-default" (click)="useDefaultServer()">UseDefault</button>
		  </div>
	  </div>
	  <div class="form-inline">
		  <div class="form-group">
		    <label for="UserName">Login user name</label>
		    <input type="text" class="form-control" id="userName" placeholder="sa" [(ngModel)] = "dbConnection.userName" required>
		  </div>
		  <button type="submit" class="btn btn-default" (click)="useDefaultUserName()">UseDefault</button>
	  </div>

	  <div class="form-group">
	    <label for="Password">Password</label>
	    <input type="password" class="form-control" id="password" placeholder="Password" [(ngModel)] = "dbConnection.password" required>
	  </div>

	  <button type="submit" class="btn btn-default" (click)="onConnect()">Connect</button>

	  <div class="form-group">
	  	<label for="databases">Databases</label>
	  	<select class="form-control" [(ngModel)]="selectedDatabase">
	  		<option *ngFor="#d of dbConnection.databases" [value]="d">{{d}}</option>
	  	</select>
	  </div>

	 
 	  <button type="submit" class="btn btn-default" (click)="isShowConnectionName = true">Save Connection Info</button>
 	  <div class="form-inline" *ngIf ="isShowConnectionName">
 	  	  <label>Enter connection info name: </label>
	 	  <input type="text" id="connectionProfileName" [(ngModel)] = "connectionName" >
	 	  <button type="submit" class="btn btn-default" (click)="discardConnectionInfo()">Discard</button>
	 	  <button type="submit" class="btn btn-default" (click)="saveConnectionInfo()">Save</button>
 	  </div>
	

	  <div class="form-group">
	  	<label>Select All sql files and the manifest file</label>
	  	<input type="file" multiple (change)="fileChangeEvent($event)">
	  	<!-- <button type="submit" class="btn btn-default" (click)="clearUploadFiles()">Clear</button> -->
	  	<ul style="list-style-type: none; margin-top:1em">
	  		<li *ngFor="#file of filesToShow" [class.selected]="file == selectedFile" (click)="onSelectFile(file)">
	  			<div class="row">
			  		<div class="col-sm-6">
			  			{{file.fileName}}
			  		</div>
			  		<div class="col-sm-2">
				  		<i *ngIf="file.isShowStatus && file.isSuccess" class="fa fa-check fa-lg" style="color: green"></i>
			  			<i *ngIf="file.isShowStatus && !file.isSuccess"class="fa fa-exclamation-triangle fa-lg" style="color:red"></i>
		  			</div>
	  			</div>
	  		</li>
	  		
	  	</ul> 
	  	
	  	<div [class.hidden]="!isShowRunButton">
	  		<button type="submit" class="btn btn-primary" (click)="runAll()">Run All</button>
	  		
	  	</div>
	  	<div [class.hidden]="!isShowRunFromSelectedButton" style="margin-top:1em">
	  		<button type="submit" class="btn btn-default" (click)="upload()">Run From Selected</button>
	  	</div>
	  </div>
	</form>
</div>
<div class="col-sm-6">
	<client-alert [message]="alerts"></client-alert>
</div>
